{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Documents/newgsa/src/contexts/Auth0Context.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport { createContext, useEffect, useReducer } from 'react'; // third-party\n\nimport { Auth0Client } from '@auth0/auth0-spa-js'; // reducer - state management\n\nimport { LOGIN, LOGOUT } from 'store/actions';\nimport accountReducer from 'store/accountReducer'; // project imports\n\nimport Loader from 'ui-component/Loader';\nimport config from 'config'; // constant\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet auth0Client;\nconst initialState = {\n  isLoggedIn: false,\n  isInitialized: false,\n  user: null\n}; // ==============================|| AUTH0 CONTEXT & PROVIDER ||============================== //\n\nconst Auth0Context = /*#__PURE__*/createContext(null);\nexport const Auth0Provider = ({\n  children\n}) => {\n  _s();\n\n  const [state, dispatch] = useReducer(accountReducer, initialState);\n  useEffect(() => {\n    const init = async () => {\n      try {\n        auth0Client = new Auth0Client({\n          redirect_uri: window.location.origin,\n          ...config.auth0\n        });\n        await auth0Client.checkSession();\n        const isLoggedIn = await auth0Client.isAuthenticated();\n\n        if (isLoggedIn) {\n          const user = await auth0Client.getUser();\n          dispatch({\n            type: LOGIN,\n            payload: {\n              isLoggedIn: true,\n              user: {\n                id: user === null || user === void 0 ? void 0 : user.sub,\n                email: user === null || user === void 0 ? void 0 : user.email\n              }\n            }\n          });\n        } else {\n          dispatch({\n            type: LOGOUT\n          });\n        }\n      } catch (err) {\n        dispatch({\n          type: LOGOUT\n        });\n      }\n    };\n\n    init();\n  }, []);\n\n  const login = async options => {\n    await auth0Client.loginWithPopup(options);\n    const isLoggedIn = await auth0Client.isAuthenticated();\n\n    if (isLoggedIn) {\n      const user = await auth0Client.getUser();\n      dispatch({\n        type: LOGIN,\n        payload: {\n          isLoggedIn: true,\n          user: {\n            id: user === null || user === void 0 ? void 0 : user.sub,\n            avatar: user === null || user === void 0 ? void 0 : user.picture,\n            email: user === null || user === void 0 ? void 0 : user.email,\n            name: user === null || user === void 0 ? void 0 : user.name,\n            tier: 'Premium'\n          }\n        }\n      });\n    }\n  };\n\n  const logout = () => {\n    auth0Client.logout();\n    dispatch({\n      type: LOGOUT\n    });\n  };\n\n  const resetPassword = email => console.log(email);\n\n  const updateProfile = () => {};\n\n  if (state.isInitialized !== undefined && !state.isInitialized) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Auth0Context.Provider, {\n    value: { ...state,\n      login,\n      logout,\n      resetPassword,\n      updateProfile\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Auth0Provider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = Auth0Provider;\nAuth0Provider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default Auth0Context;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth0Provider\");","map":{"version":3,"sources":["/Users/admin/Documents/newgsa/src/contexts/Auth0Context.js"],"names":["PropTypes","createContext","useEffect","useReducer","Auth0Client","LOGIN","LOGOUT","accountReducer","Loader","config","auth0Client","initialState","isLoggedIn","isInitialized","user","Auth0Context","Auth0Provider","children","state","dispatch","init","redirect_uri","window","location","origin","auth0","checkSession","isAuthenticated","getUser","type","payload","id","sub","email","err","login","options","loginWithPopup","avatar","picture","name","tier","logout","resetPassword","console","log","updateProfile","undefined","propTypes","node","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { createContext, useEffect, useReducer } from 'react';\r\n\r\n// third-party\r\nimport { Auth0Client } from '@auth0/auth0-spa-js';\r\n\r\n// reducer - state management\r\nimport { LOGIN, LOGOUT } from 'store/actions';\r\nimport accountReducer from 'store/accountReducer';\r\n\r\n// project imports\r\nimport Loader from 'ui-component/Loader';\r\nimport config from 'config';\r\n\r\n// constant\r\nlet auth0Client;\r\n\r\nconst initialState = {\r\n    isLoggedIn: false,\r\n    isInitialized: false,\r\n    user: null\r\n};\r\n\r\n// ==============================|| AUTH0 CONTEXT & PROVIDER ||============================== //\r\n\r\nconst Auth0Context = createContext(null);\r\n\r\nexport const Auth0Provider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(accountReducer, initialState);\r\n\r\n    useEffect(() => {\r\n        const init = async () => {\r\n            try {\r\n                auth0Client = new Auth0Client({\r\n                    redirect_uri: window.location.origin,\r\n                    ...config.auth0\r\n                });\r\n\r\n                await auth0Client.checkSession();\r\n                const isLoggedIn = await auth0Client.isAuthenticated();\r\n\r\n                if (isLoggedIn) {\r\n                    const user = await auth0Client.getUser();\r\n\r\n                    dispatch({\r\n                        type: LOGIN,\r\n                        payload: {\r\n                            isLoggedIn: true,\r\n                            user: {\r\n                                id: user?.sub,\r\n                                email: user?.email\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: LOGOUT\r\n                    });\r\n                }\r\n            } catch (err) {\r\n                dispatch({\r\n                    type: LOGOUT\r\n                });\r\n            }\r\n        };\r\n\r\n        init();\r\n    }, []);\r\n\r\n    const login = async (options) => {\r\n        await auth0Client.loginWithPopup(options);\r\n        const isLoggedIn = await auth0Client.isAuthenticated();\r\n\r\n        if (isLoggedIn) {\r\n            const user = await auth0Client.getUser();\r\n            dispatch({\r\n                type: LOGIN,\r\n                payload: {\r\n                    isLoggedIn: true,\r\n                    user: {\r\n                        id: user?.sub,\r\n                        avatar: user?.picture,\r\n                        email: user?.email,\r\n                        name: user?.name,\r\n                        tier: 'Premium'\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        auth0Client.logout();\r\n\r\n        dispatch({\r\n            type: LOGOUT\r\n        });\r\n    };\r\n\r\n    const resetPassword = (email) => console.log(email);\r\n\r\n    const updateProfile = () => {};\r\n\r\n    if (state.isInitialized !== undefined && !state.isInitialized) {\r\n        return <Loader />;\r\n    }\r\n\r\n    return <Auth0Context.Provider value={{ ...state, login, logout, resetPassword, updateProfile }}>{children}</Auth0Context.Provider>;\r\n};\r\n\r\nAuth0Provider.propTypes = {\r\n    children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Auth0Context;\r\n"]},"metadata":{},"sourceType":"module"}