{"ast":null,"code":"var _jsxFileName = \"/Users/fernandoguerra/Documents/gsaultimo/src/views/application/chat/index.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux'; // material-ui\n\nimport { useTheme, styled } from '@mui/material/styles';\nimport { Box, CardContent, ClickAwayListener, Divider, Grid, IconButton, Menu, MenuItem, Popper, TextField, Typography, useMediaQuery } from '@mui/material'; // third-party\n\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react'; // project imports\n\nimport UserDetails from './UserDetails';\nimport ChatDrawer from './ChatDrawer';\nimport ChartHistory from './ChartHistory';\nimport AvatarStatus from './AvatarStatus';\nimport MainCard from 'ui-component/cards/MainCard';\nimport Avatar from 'ui-component/extended/Avatar';\nimport axios from 'utils/axios';\nimport { SET_MENU } from 'store/actions';\nimport { appDrawerWidth as drawerWidth, gridSpacing } from 'store/constant'; // assets\n\nimport AttachmentTwoToneIcon from '@mui/icons-material/AttachmentTwoTone';\nimport MenuRoundedIcon from '@mui/icons-material/MenuRounded';\nimport MoreHorizTwoToneIcon from '@mui/icons-material/MoreHorizTwoTone';\nimport ErrorTwoToneIcon from '@mui/icons-material/ErrorTwoTone';\nimport VideoCallTwoToneIcon from '@mui/icons-material/VideoCallTwoTone';\nimport CallTwoToneIcon from '@mui/icons-material/CallTwoTone';\nimport SendTwoToneIcon from '@mui/icons-material/SendTwoTone';\nimport MoodTwoToneIcon from '@mui/icons-material/MoodTwoTone';\nimport HighlightOffTwoToneIcon from '@mui/icons-material/HighlightOffTwoTone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst avatarImage = require.context('assets/images/users', true); // drawer content element\n\n\nconst Main = styled('main', {\n  shouldForwardProp: prop => prop !== 'open'\n})(({\n  theme,\n  open\n}) => ({\n  flexGrow: 1,\n  paddingLeft: open ? theme.spacing(3) : 0,\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen\n  }),\n  marginLeft: `-${drawerWidth}px`,\n  [theme.breakpoints.down('lg')]: {\n    paddingLeft: 0,\n    marginLeft: 0\n  },\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  })\n})); // ==============================|| APPLICATION CHAT ||============================== //\n\nconst ChatMainPage = () => {\n  _s();\n\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const matchDownSM = useMediaQuery(theme.breakpoints.down('lg')); // handle right sidebar dropdown menu\n\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClickSort = event => {\n    setAnchorEl(event === null || event === void 0 ? void 0 : event.currentTarget);\n  };\n\n  const handleCloseSort = () => {\n    setAnchorEl(null);\n  }; // set chat details page open when user is selected from sidebar\n\n\n  const [emailDetails, setEmailDetails] = useState(false);\n\n  const handleUserChange = () => {\n    setEmailDetails(prev => !prev);\n  }; // toggle sidebar\n\n\n  const [openChatDrawer, setOpenChatDrawer] = useState(true);\n\n  const handleDrawerOpen = () => {\n    setOpenChatDrawer(prevState => !prevState);\n  }; // close sidebar when widow size below 'md' breakpoint\n\n\n  useEffect(() => {\n    setOpenChatDrawer(!matchDownSM);\n  }, [matchDownSM]); // fetch user details of current user\n\n  const [user, setUser] = useState({});\n\n  const getUserData = async () => {\n    const response = await axios.post('/api/chat/users/id', {\n      id: 1\n    });\n    setUser(response.data);\n  };\n\n  useEffect(() => {\n    // hide left drawer when email app opens\n    dispatch({\n      type: SET_MENU,\n      opened: false\n    });\n    getUserData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // fetch chat history for selected user\n\n  const [data, setData] = useState([]);\n\n  const getData = async userData => {\n    const response = await axios.post('/api/chat/filter', {\n      user: userData.name\n    });\n    setData(response.data);\n  };\n\n  useEffect(() => {\n    getData(user);\n  }, [user]); // handle new message form\n\n  const [message, setMessage] = useState('');\n\n  const handleOnSend = () => {\n    const d = new Date();\n    setMessage('');\n    const newMessage = {\n      from: 'User1',\n      to: user.name,\n      text: message,\n      time: d.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    };\n    setData(prevState => [...prevState, newMessage]);\n    axios.post('/api/chat/insert', { ...newMessage\n    });\n  };\n\n  const handleEnter = event => {\n    if ((event === null || event === void 0 ? void 0 : event.key) !== 'Enter') {\n      return;\n    }\n\n    handleOnSend();\n  }; // handle emoji\n\n\n  const onEmojiClick = (event, emojiObject) => {\n    setMessage(message + emojiObject.emoji);\n  };\n\n  const [anchorElEmoji, setAnchorElEmoji] = useState();\n  /** No single type can cater for all elements */\n\n  const handleOnEmojiButtonClick = event => {\n    setAnchorElEmoji(anchorElEmoji ? null : event === null || event === void 0 ? void 0 : event.currentTarget);\n  };\n\n  const emojiOpen = Boolean(anchorElEmoji);\n  const emojiId = emojiOpen ? 'simple-popper' : undefined;\n\n  const handleCloseEmoji = () => {\n    setAnchorElEmoji(null);\n  };\n\n  if (!user) return /*#__PURE__*/_jsxDEV(Typography, {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(ChatDrawer, {\n      openChatDrawer: openChatDrawer,\n      handleDrawerOpen: handleDrawerOpen,\n      setUser: setUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      theme: theme,\n      open: openChatDrawer,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: gridSpacing,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: true,\n          zeroMinWidth: true,\n          sx: {\n            display: emailDetails ? {\n              xs: 'none',\n              sm: 'flex'\n            } : 'flex'\n          },\n          children: /*#__PURE__*/_jsxDEV(MainCard, {\n            sx: {\n              bgcolor: theme.palette.mode === 'dark' ? 'dark.main' : 'grey.50'\n            },\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: gridSpacing,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  alignItems: \"center\",\n                  spacing: 0.5,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: handleDrawerOpen,\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(MenuRoundedIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 193,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(Grid, {\n                      container: true,\n                      spacing: 2,\n                      alignItems: \"center\",\n                      sx: {\n                        flexWrap: 'nowrap'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        children: /*#__PURE__*/_jsxDEV(Avatar, {\n                          alt: user.name,\n                          src: user.avatar && avatarImage(`./${user.avatar}`).default\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 199,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 198,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        sm: true,\n                        zeroMinWidth: true,\n                        children: /*#__PURE__*/_jsxDEV(Grid, {\n                          container: true,\n                          spacing: 0,\n                          alignItems: \"center\",\n                          children: [/*#__PURE__*/_jsxDEV(Grid, {\n                            item: true,\n                            xs: 12,\n                            children: /*#__PURE__*/_jsxDEV(Typography, {\n                              variant: \"h4\",\n                              component: \"div\",\n                              children: [user.name, ' ', user.online_status && /*#__PURE__*/_jsxDEV(AvatarStatus, {\n                                status: user.online_status\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 206,\n                                columnNumber: 88\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 204,\n                              columnNumber: 61\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 203,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                            item: true,\n                            xs: 12,\n                            children: /*#__PURE__*/_jsxDEV(Typography, {\n                              variant: \"subtitle2\",\n                              children: [\"Last seen \", user.lastMessage]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 210,\n                              columnNumber: 61\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 209,\n                            columnNumber: 57\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 202,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    sm: true,\n                    zeroMinWidth: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(CallTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 219,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 218,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(VideoCallTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: handleUserChange,\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(ErrorTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 229,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: handleClickSort,\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(MoreHorizTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 234,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 233,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n                      id: \"simple-menu\",\n                      anchorEl: anchorEl,\n                      keepMounted: true,\n                      open: Boolean(anchorEl),\n                      onClose: handleCloseSort,\n                      anchorOrigin: {\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                      },\n                      transformOrigin: {\n                        vertical: 'top',\n                        horizontal: 'right'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                        onClick: handleCloseSort,\n                        children: \"Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                        onClick: handleCloseSort,\n                        children: \"Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                        onClick: handleCloseSort,\n                        children: \"Ratting\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 253,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                        onClick: handleCloseSort,\n                        children: \"Unread\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 254,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                  sx: {\n                    mt: theme.spacing(2)\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(PerfectScrollbar, {\n                style: {\n                  width: '100%',\n                  height: 'calc(100vh - 440px)',\n                  overflowX: 'hidden',\n                  minHeight: 525\n                },\n                children: /*#__PURE__*/_jsxDEV(CardContent, {\n                  children: /*#__PURE__*/_jsxDEV(ChartHistory, {\n                    theme: theme,\n                    handleUserDetails: handleUserChange,\n                    handleDrawerOpen: handleDrawerOpen,\n                    user: user,\n                    data: data\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 1,\n                  alignItems: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                      ref: anchorElEmoji,\n                      \"aria-describedby\": emojiId,\n                      onClick: handleOnEmojiButtonClick,\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(MoodTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 282,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 276,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Popper, {\n                      id: emojiId,\n                      open: emojiOpen,\n                      anchorEl: anchorElEmoji,\n                      disablePortal: true,\n                      popperOptions: {\n                        modifiers: [{\n                          name: 'offset',\n                          options: {\n                            offset: [-20, 20]\n                          }\n                        }]\n                      },\n                      children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n                        onClickAway: handleCloseEmoji,\n                        children: /*#__PURE__*/_jsxDEV(MainCard, {\n                          elevation: 8,\n                          content: false,\n                          children: /*#__PURE__*/_jsxDEV(Picker, {\n                            onEmojiClick: onEmojiClick,\n                            skinTone: SKIN_TONE_MEDIUM_DARK,\n                            disableAutoFocus: true\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 302,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 301,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 300,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 284,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: true,\n                    zeroMinWidth: true,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Type a Message\",\n                      value: message,\n                      onChange: e => setMessage(e.target.value),\n                      onKeyPress: handleEnter\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(AttachmentTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 322,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 321,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      color: \"primary\",\n                      onClick: handleOnSend,\n                      size: \"large\",\n                      children: /*#__PURE__*/_jsxDEV(SendTwoToneIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 327,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this), emailDetails && /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sx: {\n            margin: {\n              xs: '0 auto',\n              md: 'initial'\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: {\n                xs: 'block',\n                sm: 'none',\n                textAlign: 'right'\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: handleUserChange,\n              sx: {\n                mb: -5\n              },\n              size: \"large\",\n              children: /*#__PURE__*/_jsxDEV(HighlightOffTwoToneIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(UserDetails, {\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChatMainPage, \"pNo94q6yWkZkwKu2ntfkmppgtCM=\", false, function () {\n  return [useTheme, useDispatch, useMediaQuery];\n});\n\n_c = ChatMainPage;\nChatDrawer.propTypes = {\n  handleDrawerOpen: PropTypes.func,\n  openChatDrawer: PropTypes.bool,\n  setUser: PropTypes.func\n};\nexport default ChatMainPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatMainPage\");","map":{"version":3,"sources":["/Users/fernandoguerra/Documents/gsaultimo/src/views/application/chat/index.js"],"names":["PropTypes","useState","useEffect","useDispatch","useTheme","styled","Box","CardContent","ClickAwayListener","Divider","Grid","IconButton","Menu","MenuItem","Popper","TextField","Typography","useMediaQuery","PerfectScrollbar","Picker","SKIN_TONE_MEDIUM_DARK","UserDetails","ChatDrawer","ChartHistory","AvatarStatus","MainCard","Avatar","axios","SET_MENU","appDrawerWidth","drawerWidth","gridSpacing","AttachmentTwoToneIcon","MenuRoundedIcon","MoreHorizTwoToneIcon","ErrorTwoToneIcon","VideoCallTwoToneIcon","CallTwoToneIcon","SendTwoToneIcon","MoodTwoToneIcon","HighlightOffTwoToneIcon","avatarImage","require","context","Main","shouldForwardProp","prop","theme","open","flexGrow","paddingLeft","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","breakpoints","down","easeOut","enteringScreen","ChatMainPage","dispatch","matchDownSM","anchorEl","setAnchorEl","handleClickSort","event","currentTarget","handleCloseSort","emailDetails","setEmailDetails","handleUserChange","prev","openChatDrawer","setOpenChatDrawer","handleDrawerOpen","prevState","user","setUser","getUserData","response","post","id","data","type","opened","setData","getData","userData","name","message","setMessage","handleOnSend","d","Date","newMessage","from","to","text","time","toLocaleTimeString","hour","minute","handleEnter","key","onEmojiClick","emojiObject","emoji","anchorElEmoji","setAnchorElEmoji","handleOnEmojiButtonClick","emojiOpen","Boolean","emojiId","undefined","handleCloseEmoji","display","xs","sm","bgcolor","palette","mode","flexWrap","avatar","default","online_status","lastMessage","vertical","horizontal","mt","width","height","overflowX","minHeight","modifiers","options","offset","e","target","value","margin","md","textAlign","mb","propTypes","func","bool"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// material-ui\r\nimport { useTheme, styled } from '@mui/material/styles';\r\nimport {\r\n    Box,\r\n    CardContent,\r\n    ClickAwayListener,\r\n    Divider,\r\n    Grid,\r\n    IconButton,\r\n    Menu,\r\n    MenuItem,\r\n    Popper,\r\n    TextField,\r\n    Typography,\r\n    useMediaQuery\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react';\r\n\r\n// project imports\r\nimport UserDetails from './UserDetails';\r\nimport ChatDrawer from './ChatDrawer';\r\nimport ChartHistory from './ChartHistory';\r\nimport AvatarStatus from './AvatarStatus';\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Avatar from 'ui-component/extended/Avatar';\r\nimport axios from 'utils/axios';\r\nimport { SET_MENU } from 'store/actions';\r\nimport { appDrawerWidth as drawerWidth, gridSpacing } from 'store/constant';\r\n\r\n// assets\r\nimport AttachmentTwoToneIcon from '@mui/icons-material/AttachmentTwoTone';\r\nimport MenuRoundedIcon from '@mui/icons-material/MenuRounded';\r\nimport MoreHorizTwoToneIcon from '@mui/icons-material/MoreHorizTwoTone';\r\nimport ErrorTwoToneIcon from '@mui/icons-material/ErrorTwoTone';\r\nimport VideoCallTwoToneIcon from '@mui/icons-material/VideoCallTwoTone';\r\nimport CallTwoToneIcon from '@mui/icons-material/CallTwoTone';\r\nimport SendTwoToneIcon from '@mui/icons-material/SendTwoTone';\r\nimport MoodTwoToneIcon from '@mui/icons-material/MoodTwoTone';\r\nimport HighlightOffTwoToneIcon from '@mui/icons-material/HighlightOffTwoTone';\r\n\r\nconst avatarImage = require.context('assets/images/users', true);\r\n\r\n// drawer content element\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(({ theme, open }) => ({\r\n    flexGrow: 1,\r\n    paddingLeft: open ? theme.spacing(3) : 0,\r\n    transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    marginLeft: `-${drawerWidth}px`,\r\n    [theme.breakpoints.down('lg')]: {\r\n        paddingLeft: 0,\r\n        marginLeft: 0\r\n    },\r\n    ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        }),\r\n        marginLeft: 0\r\n    })\r\n}));\r\n\r\n// ==============================|| APPLICATION CHAT ||============================== //\r\n\r\nconst ChatMainPage = () => {\r\n    const theme = useTheme();\r\n    const dispatch = useDispatch();\r\n\r\n    const matchDownSM = useMediaQuery(theme.breakpoints.down('lg'));\r\n\r\n    // handle right sidebar dropdown menu\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const handleClickSort = (event) => {\r\n        setAnchorEl(event?.currentTarget);\r\n    };\r\n\r\n    const handleCloseSort = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    // set chat details page open when user is selected from sidebar\r\n    const [emailDetails, setEmailDetails] = useState(false);\r\n    const handleUserChange = () => {\r\n        setEmailDetails((prev) => !prev);\r\n    };\r\n\r\n    // toggle sidebar\r\n    const [openChatDrawer, setOpenChatDrawer] = useState(true);\r\n    const handleDrawerOpen = () => {\r\n        setOpenChatDrawer((prevState) => !prevState);\r\n    };\r\n\r\n    // close sidebar when widow size below 'md' breakpoint\r\n    useEffect(() => {\r\n        setOpenChatDrawer(!matchDownSM);\r\n    }, [matchDownSM]);\r\n\r\n    // fetch user details of current user\r\n    const [user, setUser] = useState({});\r\n    const getUserData = async () => {\r\n        const response = await axios.post('/api/chat/users/id', { id: 1 });\r\n        setUser(response.data);\r\n    };\r\n\r\n    useEffect(() => {\r\n        // hide left drawer when email app opens\r\n        dispatch({ type: SET_MENU, opened: false });\r\n        getUserData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // fetch chat history for selected user\r\n    const [data, setData] = useState([]);\r\n    const getData = async (userData) => {\r\n        const response = await axios.post('/api/chat/filter', {\r\n            user: userData.name\r\n        });\r\n        setData(response.data);\r\n    };\r\n\r\n    useEffect(() => {\r\n        getData(user);\r\n    }, [user]);\r\n\r\n    // handle new message form\r\n    const [message, setMessage] = useState('');\r\n    const handleOnSend = () => {\r\n        const d = new Date();\r\n        setMessage('');\r\n        const newMessage = {\r\n            from: 'User1',\r\n            to: user.name,\r\n            text: message,\r\n            time: d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        };\r\n        setData((prevState) => [...prevState, newMessage]);\r\n        axios.post('/api/chat/insert', {\r\n            ...newMessage\r\n        });\r\n    };\r\n\r\n    const handleEnter = (event) => {\r\n        if (event?.key !== 'Enter') {\r\n            return;\r\n        }\r\n        handleOnSend();\r\n    };\r\n\r\n    // handle emoji\r\n    const onEmojiClick = (event, emojiObject) => {\r\n        setMessage(message + emojiObject.emoji);\r\n    };\r\n\r\n    const [anchorElEmoji, setAnchorElEmoji] = useState(); /** No single type can cater for all elements */\r\n    const handleOnEmojiButtonClick = (event) => {\r\n        setAnchorElEmoji(anchorElEmoji ? null : event?.currentTarget);\r\n    };\r\n\r\n    const emojiOpen = Boolean(anchorElEmoji);\r\n    const emojiId = emojiOpen ? 'simple-popper' : undefined;\r\n    const handleCloseEmoji = () => {\r\n        setAnchorElEmoji(null);\r\n    };\r\n\r\n    if (!user) return <Typography>Loading...</Typography>;\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex' }}>\r\n            <ChatDrawer openChatDrawer={openChatDrawer} handleDrawerOpen={handleDrawerOpen} setUser={setUser} />\r\n            <Main theme={theme} open={openChatDrawer}>\r\n                <Grid container spacing={gridSpacing}>\r\n                    <Grid item xs zeroMinWidth sx={{ display: emailDetails ? { xs: 'none', sm: 'flex' } : 'flex' }}>\r\n                        <MainCard\r\n                            sx={{\r\n                                bgcolor: theme.palette.mode === 'dark' ? 'dark.main' : 'grey.50'\r\n                            }}\r\n                        >\r\n                            <Grid container spacing={gridSpacing}>\r\n                                <Grid item xs={12}>\r\n                                    <Grid container alignItems=\"center\" spacing={0.5}>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleDrawerOpen} size=\"large\">\r\n                                                <MenuRoundedIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <Grid container spacing={2} alignItems=\"center\" sx={{ flexWrap: 'nowrap' }}>\r\n                                                <Grid item>\r\n                                                    <Avatar alt={user.name} src={user.avatar && avatarImage(`./${user.avatar}`).default} />\r\n                                                </Grid>\r\n                                                <Grid item sm zeroMinWidth>\r\n                                                    <Grid container spacing={0} alignItems=\"center\">\r\n                                                        <Grid item xs={12}>\r\n                                                            <Typography variant=\"h4\" component=\"div\">\r\n                                                                {user.name}{' '}\r\n                                                                {user.online_status && <AvatarStatus status={user.online_status} />}\r\n                                                            </Typography>\r\n                                                        </Grid>\r\n                                                        <Grid item xs={12}>\r\n                                                            <Typography variant=\"subtitle2\">Last seen {user.lastMessage}</Typography>\r\n                                                        </Grid>\r\n                                                    </Grid>\r\n                                                </Grid>\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <Grid item sm zeroMinWidth />\r\n                                        <Grid item>\r\n                                            <IconButton size=\"large\">\r\n                                                <CallTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton size=\"large\">\r\n                                                <VideoCallTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleUserChange} size=\"large\">\r\n                                                <ErrorTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleClickSort} size=\"large\">\r\n                                                <MoreHorizTwoToneIcon />\r\n                                            </IconButton>\r\n                                            <Menu\r\n                                                id=\"simple-menu\"\r\n                                                anchorEl={anchorEl}\r\n                                                keepMounted\r\n                                                open={Boolean(anchorEl)}\r\n                                                onClose={handleCloseSort}\r\n                                                anchorOrigin={{\r\n                                                    vertical: 'bottom',\r\n                                                    horizontal: 'right'\r\n                                                }}\r\n                                                transformOrigin={{\r\n                                                    vertical: 'top',\r\n                                                    horizontal: 'right'\r\n                                                }}\r\n                                            >\r\n                                                <MenuItem onClick={handleCloseSort}>Name</MenuItem>\r\n                                                <MenuItem onClick={handleCloseSort}>Date</MenuItem>\r\n                                                <MenuItem onClick={handleCloseSort}>Ratting</MenuItem>\r\n                                                <MenuItem onClick={handleCloseSort}>Unread</MenuItem>\r\n                                            </Menu>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <Divider sx={{ mt: theme.spacing(2) }} />\r\n                                </Grid>\r\n                                <PerfectScrollbar\r\n                                    style={{ width: '100%', height: 'calc(100vh - 440px)', overflowX: 'hidden', minHeight: 525 }}\r\n                                >\r\n                                    <CardContent>\r\n                                        <ChartHistory\r\n                                            theme={theme}\r\n                                            handleUserDetails={handleUserChange}\r\n                                            handleDrawerOpen={handleDrawerOpen}\r\n                                            user={user}\r\n                                            data={data}\r\n                                        />\r\n                                    </CardContent>\r\n                                </PerfectScrollbar>\r\n                                <Grid item xs={12}>\r\n                                    <Grid container spacing={1} alignItems=\"center\">\r\n                                        <Grid item>\r\n                                            <IconButton\r\n                                                ref={anchorElEmoji}\r\n                                                aria-describedby={emojiId}\r\n                                                onClick={handleOnEmojiButtonClick}\r\n                                                size=\"large\"\r\n                                            >\r\n                                                <MoodTwoToneIcon />\r\n                                            </IconButton>\r\n                                            <Popper\r\n                                                id={emojiId}\r\n                                                open={emojiOpen}\r\n                                                anchorEl={anchorElEmoji}\r\n                                                disablePortal\r\n                                                popperOptions={{\r\n                                                    modifiers: [\r\n                                                        {\r\n                                                            name: 'offset',\r\n                                                            options: {\r\n                                                                offset: [-20, 20]\r\n                                                            }\r\n                                                        }\r\n                                                    ]\r\n                                                }}\r\n                                            >\r\n                                                <ClickAwayListener onClickAway={handleCloseEmoji}>\r\n                                                    <MainCard elevation={8} content={false}>\r\n                                                        <Picker\r\n                                                            onEmojiClick={onEmojiClick}\r\n                                                            skinTone={SKIN_TONE_MEDIUM_DARK}\r\n                                                            disableAutoFocus\r\n                                                        />\r\n                                                    </MainCard>\r\n                                                </ClickAwayListener>\r\n                                            </Popper>\r\n                                        </Grid>\r\n                                        <Grid item xs zeroMinWidth>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                label=\"Type a Message\"\r\n                                                value={message}\r\n                                                onChange={(e) => setMessage(e.target.value)}\r\n                                                onKeyPress={handleEnter}\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton size=\"large\">\r\n                                                <AttachmentTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton color=\"primary\" onClick={handleOnSend} size=\"large\">\r\n                                                <SendTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </MainCard>\r\n                    </Grid>\r\n                    {emailDetails && (\r\n                        <Grid item sx={{ margin: { xs: '0 auto', md: 'initial' } }}>\r\n                            <Box sx={{ display: { xs: 'block', sm: 'none', textAlign: 'right' } }}>\r\n                                <IconButton onClick={handleUserChange} sx={{ mb: -5 }} size=\"large\">\r\n                                    <HighlightOffTwoToneIcon />\r\n                                </IconButton>\r\n                            </Box>\r\n                            <UserDetails user={user} />\r\n                        </Grid>\r\n                    )}\r\n                </Grid>\r\n            </Main>\r\n        </Box>\r\n    );\r\n};\r\n\r\nChatDrawer.propTypes = {\r\n    handleDrawerOpen: PropTypes.func,\r\n    openChatDrawer: PropTypes.bool,\r\n    setUser: PropTypes.func\r\n};\r\n\r\nexport default ChatMainPage;\r\n"]},"metadata":{},"sourceType":"module"}