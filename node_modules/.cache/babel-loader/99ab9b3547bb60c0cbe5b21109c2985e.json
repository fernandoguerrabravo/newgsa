{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Documents/newgsa/src/views/application/e-commerce/Products/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'; // material-ui\n\nimport { styled, useTheme } from '@mui/material/styles';\nimport { Box, Button, ButtonBase, Divider, Drawer, Grid, IconButton, InputAdornment, Menu, MenuItem, Stack, TextField, Typography, useMediaQuery } from '@mui/material'; // third party\n\nimport PerfectScrollbar from 'react-perfect-scrollbar'; // project imports\n\nimport SortOptions from './SortOptions';\nimport ProductEmpty from './ProductEmpty';\nimport ProductFilter from './ProductFilter';\nimport ProductFilterView from './ProductFilterView';\nimport ProductCard from 'ui-component/cards/ProductCard';\nimport FloatingCart from 'ui-component/cards/FloatingCart';\nimport SkeletonProductPlaceholder from 'ui-component/cards/Skeleton/ProductPlaceholder';\nimport axios from 'utils/axios';\nimport { SET_MENU, RESET_CART } from 'store/actions';\nimport { appDrawerWidth, gridSpacing } from 'store/constant'; // assets\n\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\nimport FilterAltIcon from '@mui/icons-material/FilterAlt';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport SearchIcon from '@mui/icons-material/Search'; // product list container\n\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Main = styled('main', {\n  shouldForwardProp: prop => prop !== 'open'\n})(({\n  theme,\n  open\n}) => ({\n  flexGrow: 1,\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen\n  }),\n  marginRight: -appDrawerWidth,\n  [theme.breakpoints.down('xl')]: {\n    paddingRight: 0,\n    marginRight: 0\n  },\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: 0\n  })\n})); // ==============================|| E-COMMERCE - PRODUCT GRID ||============================== //\n\nconst Products = () => {\n  _s();\n\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const customization = useSelector(state => state.customization);\n  const cart = useSelector(state => state.cart);\n  const matchDownSM = useMediaQuery(theme.breakpoints.down('md'));\n  const matchDownMD = useMediaQuery(theme.breakpoints.down('lg'));\n  const matchDownLG = useMediaQuery(theme.breakpoints.down('xl'));\n  const [isLoading, setLoading] = useState(true);\n  useEffect(() => {\n    setLoading(false);\n  }, []); // drawer\n\n  const [open, setOpen] = useState(isLoading);\n\n  const handleDrawerOpen = () => {\n    setOpen(prevState => !prevState);\n  }; // product data\n\n\n  const [products, setProducts] = useState([]);\n\n  const getProducts = async () => {\n    const response = await axios.get('/api/products/list');\n    setProducts(response.data.products);\n  };\n\n  useEffect(() => {\n    getProducts(); // hide left drawer when email app opens\n\n    dispatch({\n      type: SET_MENU,\n      opened: false\n    }); // clear cart if complete order\n\n    if (cart.checkout.step > 2) {\n      dispatch({\n        type: RESET_CART\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []); // filter\n\n  const initialState = {\n    search: '',\n    sort: 'low',\n    gender: [],\n    categories: ['all'],\n    colors: [],\n    price: '',\n    rating: 0\n  };\n  const [filter, setFilter] = useState(initialState); // search filter\n\n  const handleSearch = async event => {\n    const newString = event === null || event === void 0 ? void 0 : event.target.value;\n    setFilter({ ...filter,\n      search: newString\n    });\n  }; // sort options\n\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const openSort = Boolean(anchorEl);\n\n  const handleClickListItem = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const filterIsEqual = (a1, a2) => a1 === a2 || a1.length === a2.length && a1.search === a2.search && a1.sort === a2.sort && a1.price === a2.price && a1.rating === a2.rating && JSON.stringify(a1.gender) === JSON.stringify(a2.gender) && JSON.stringify(a1.categories) === JSON.stringify(a2.categories) && JSON.stringify(a1.colors) === JSON.stringify(a2.colors);\n\n  const handelFilter = (type, params, rating) => {\n    setLoading(true);\n\n    switch (type) {\n      case 'gender':\n        if (filter.gender.some(item => item === params)) {\n          setFilter({ ...filter,\n            gender: filter.gender.filter(item => item !== params)\n          });\n        } else {\n          setFilter({ ...filter,\n            gender: [...filter.gender, params]\n          });\n        }\n\n        break;\n\n      case 'categories':\n        if (filter.categories.some(item => item === params)) {\n          setFilter({ ...filter,\n            categories: filter.categories.filter(item => item !== params)\n          });\n        } else if (filter.categories.some(item => item === 'all') || params === 'all') {\n          setFilter({ ...filter,\n            categories: [params]\n          });\n        } else {\n          setFilter({ ...filter,\n            categories: [...filter.categories, params]\n          });\n        }\n\n        break;\n\n      case 'colors':\n        if (filter.colors.some(item => item === params)) {\n          setFilter({ ...filter,\n            colors: filter.colors.filter(item => item !== params)\n          });\n        } else {\n          setFilter({ ...filter,\n            colors: [...filter.colors, params]\n          });\n        }\n\n        break;\n\n      case 'price':\n        setFilter({ ...filter,\n          price: params\n        });\n        break;\n\n      case 'search':\n        setFilter({ ...filter,\n          search: params\n        });\n        break;\n\n      case 'sort':\n        setFilter({ ...filter,\n          sort: params\n        });\n        break;\n\n      case 'rating':\n        setFilter({ ...filter,\n          rating\n        });\n        break;\n\n      case 'reset':\n        setFilter(initialState);\n        break;\n\n      default: // no options\n\n    }\n  };\n\n  const filterData = async () => {\n    await axios.post('/api/products/filter', {\n      filter\n    }).then(res => {\n      setProducts(res.data.results);\n      setLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    filterData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filter]);\n  useEffect(() => {\n    setOpen(!matchDownLG);\n  }, [matchDownLG]); // sort filter\n\n  const handleMenuItemClick = (event, index) => {\n    setFilter({ ...filter,\n      sort: index\n    });\n    setAnchorEl(null);\n  };\n\n  const sortLabel = SortOptions.filter(items => items.value === filter.sort);\n\n  let productResult = /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n\n  if (products) {\n    productResult = products.map((product, index) => /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      lg: 3,\n      children: /*#__PURE__*/_jsxDEV(ProductCard, {\n        id: product.id,\n        image: product.image,\n        name: product.name,\n        description: product.description,\n        offerPrice: product.offerPrice,\n        salePrice: product.salePrice,\n        rating: product.rating,\n        color: product.colors ? product.colors[0] : undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }, this));\n  }\n\n  const spacingMD = matchDownMD ? 1 : 1.5;\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 2,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        spacing: matchDownMD ? 0.5 : 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            alignItems: \"center\",\n            spacing: 1,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h4\",\n              children: \"Shop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"large\",\n              children: /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {\n                sx: {\n                  width: '0.875rem',\n                  height: '0.875rem',\n                  fontWeight: 500,\n                  color: 'grey.500'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            spacing: matchDownSM ? 0.5 : spacingMD,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              sx: {\n                width: {\n                  xs: 140,\n                  md: 'auto'\n                }\n              },\n              InputProps: {\n                startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                  position: \"start\",\n                  children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 41\n                }, this)\n              },\n              value: filter.search,\n              placeholder: \"Search Product\",\n              size: \"small\",\n              onChange: handleSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                pl: 1.5,\n                fontSize: '1rem',\n                color: 'grey.500',\n                fontWeight: 400\n              },\n              children: \"|\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ButtonBase, {\n              disableRipple: true,\n              onClick: handleDrawerOpen,\n              children: [/*#__PURE__*/_jsxDEV(FilterAltIcon, {\n                sx: {\n                  fontWeight: 500,\n                  color: 'secondary.200'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                sx: {\n                  mt: 0.5,\n                  display: {\n                    xs: 'none',\n                    sm: 'block'\n                  }\n                },\n                children: \"Filter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                display: {\n                  xs: 'none',\n                  sm: 'flex'\n                },\n                fontSize: '1rem',\n                color: 'grey.500',\n                fontWeight: 400\n              },\n              children: \"|\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Stack, {\n              direction: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              sx: {\n                display: {\n                  xs: 'none',\n                  sm: 'flex'\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"Sort by: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                id: \"demo-positioned-button\",\n                \"aria-controls\": \"demo-positioned-menu\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": openSort ? 'true' : undefined,\n                onClick: handleClickListItem,\n                sx: {\n                  color: 'grey.500',\n                  fontWeight: 400\n                },\n                endIcon: /*#__PURE__*/_jsxDEV(KeyboardArrowDownIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 46\n                }, this),\n                children: sortLabel.length > 0 && sortLabel[0].label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Menu, {\n                id: \"demo-positioned-menu\",\n                \"aria-labelledby\": \"demo-positioned-button\",\n                anchorEl: anchorEl,\n                open: openSort,\n                onClose: handleClose,\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'right'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'right'\n                },\n                children: SortOptions.map((option, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  sx: {\n                    p: 1.5\n                  },\n                  selected: option.value === filter.sort,\n                  onClick: event => handleMenuItemClick(event, option.value),\n                  children: option.label\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          borderColor: 'grey.400'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Main, {\n          open: open,\n          children: [/*#__PURE__*/_jsxDEV(ProductFilterView, {\n            filter: filter,\n            filterIsEqual: filterIsEqual,\n            handelFilter: handelFilter,\n            initialState: initialState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: gridSpacing,\n            children: [isLoading ? [1, 2, 3, 4, 5, 6, 7, 8].map(item => /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              md: 4,\n              lg: 3,\n              children: /*#__PURE__*/_jsxDEV(SkeletonProductPlaceholder, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 43\n              }, this)\n            }, item, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 39\n            }, this)) : productResult, products.length <= 0 && /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sx: {\n                mt: 3\n              },\n              children: /*#__PURE__*/_jsxDEV(ProductEmpty, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n          sx: {\n            ml: open ? 3 : 0,\n            height: matchDownLG ? '100vh' : 'auto',\n            flexShrink: 0,\n            zIndex: {\n              xs: 1200,\n              lg: open ? 0 : -1\n            },\n            overflowX: 'hidden',\n            width: appDrawerWidth,\n            '& .MuiDrawer-paper': {\n              height: 'auto',\n              width: appDrawerWidth,\n              position: matchDownLG ? 'fixed' : 'relative',\n              border: 'none',\n              borderRadius: matchDownLG ? 0 : `${customization.borderRadius}px`\n            }\n          },\n          variant: matchDownLG ? 'temporary' : 'persistent',\n          anchor: \"right\",\n          open: open,\n          ModalProps: {\n            keepMounted: true\n          },\n          onClose: handleDrawerOpen,\n          children: /*#__PURE__*/_jsxDEV(PerfectScrollbar, {\n            component: \"div\",\n            children: /*#__PURE__*/_jsxDEV(ProductFilter, {\n              filter: filter,\n              handelFilter: handelFilter\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FloatingCart, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Products, \"7US2O5uxjEKCcyWykeEq9AA4u8s=\", false, function () {\n  return [useTheme, useDispatch, useSelector, useSelector, useMediaQuery, useMediaQuery, useMediaQuery];\n});\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["/Users/admin/Documents/newgsa/src/views/application/e-commerce/Products/index.js"],"names":["useState","useEffect","useDispatch","useSelector","styled","useTheme","Box","Button","ButtonBase","Divider","Drawer","Grid","IconButton","InputAdornment","Menu","MenuItem","Stack","TextField","Typography","useMediaQuery","PerfectScrollbar","SortOptions","ProductEmpty","ProductFilter","ProductFilterView","ProductCard","FloatingCart","SkeletonProductPlaceholder","axios","SET_MENU","RESET_CART","appDrawerWidth","gridSpacing","ArrowForwardIosIcon","FilterAltIcon","KeyboardArrowDownIcon","SearchIcon","Main","shouldForwardProp","prop","theme","open","flexGrow","transition","transitions","create","easing","sharp","duration","leavingScreen","marginRight","breakpoints","down","paddingRight","easeOut","enteringScreen","Products","dispatch","customization","state","cart","matchDownSM","matchDownMD","matchDownLG","isLoading","setLoading","setOpen","handleDrawerOpen","prevState","products","setProducts","getProducts","response","get","data","type","opened","checkout","step","initialState","search","sort","gender","categories","colors","price","rating","filter","setFilter","handleSearch","event","newString","target","value","anchorEl","setAnchorEl","openSort","Boolean","handleClickListItem","currentTarget","handleClose","filterIsEqual","a1","a2","length","JSON","stringify","handelFilter","params","some","item","filterData","post","then","res","results","handleMenuItemClick","index","sortLabel","items","productResult","map","product","id","image","name","description","offerPrice","salePrice","undefined","spacingMD","width","height","fontWeight","color","xs","md","startAdornment","pl","fontSize","mt","display","sm","label","vertical","horizontal","option","p","borderColor","ml","flexShrink","zIndex","lg","overflowX","position","border","borderRadius","keepMounted"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// material-ui\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport {\r\n    Box,\r\n    Button,\r\n    ButtonBase,\r\n    Divider,\r\n    Drawer,\r\n    Grid,\r\n    IconButton,\r\n    InputAdornment,\r\n    Menu,\r\n    MenuItem,\r\n    Stack,\r\n    TextField,\r\n    Typography,\r\n    useMediaQuery\r\n} from '@mui/material';\r\n\r\n// third party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// project imports\r\nimport SortOptions from './SortOptions';\r\nimport ProductEmpty from './ProductEmpty';\r\nimport ProductFilter from './ProductFilter';\r\nimport ProductFilterView from './ProductFilterView';\r\nimport ProductCard from 'ui-component/cards/ProductCard';\r\nimport FloatingCart from 'ui-component/cards/FloatingCart';\r\nimport SkeletonProductPlaceholder from 'ui-component/cards/Skeleton/ProductPlaceholder';\r\nimport axios from 'utils/axios';\r\n\r\nimport { SET_MENU, RESET_CART } from 'store/actions';\r\nimport { appDrawerWidth, gridSpacing } from 'store/constant';\r\n\r\n// assets\r\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\r\nimport FilterAltIcon from '@mui/icons-material/FilterAlt';\r\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\n\r\n// product list container\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(({ theme, open }) => ({\r\n    flexGrow: 1,\r\n    transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    marginRight: -appDrawerWidth,\r\n    [theme.breakpoints.down('xl')]: {\r\n        paddingRight: 0,\r\n        marginRight: 0\r\n    },\r\n    ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        }),\r\n        marginRight: 0\r\n    })\r\n}));\r\n\r\n// ==============================|| E-COMMERCE - PRODUCT GRID ||============================== //\r\n\r\nconst Products = () => {\r\n    const theme = useTheme();\r\n    const dispatch = useDispatch();\r\n\r\n    const customization = useSelector((state) => state.customization);\r\n    const cart = useSelector((state) => state.cart);\r\n\r\n    const matchDownSM = useMediaQuery(theme.breakpoints.down('md'));\r\n    const matchDownMD = useMediaQuery(theme.breakpoints.down('lg'));\r\n    const matchDownLG = useMediaQuery(theme.breakpoints.down('xl'));\r\n\r\n    const [isLoading, setLoading] = useState(true);\r\n    useEffect(() => {\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    // drawer\r\n    const [open, setOpen] = useState(isLoading);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen((prevState) => !prevState);\r\n    };\r\n\r\n    // product data\r\n    const [products, setProducts] = useState([]);\r\n    const getProducts = async () => {\r\n        const response = await axios.get('/api/products/list');\r\n        setProducts(response.data.products);\r\n    };\r\n\r\n    useEffect(() => {\r\n        getProducts();\r\n\r\n        // hide left drawer when email app opens\r\n        dispatch({ type: SET_MENU, opened: false });\r\n\r\n        // clear cart if complete order\r\n        if (cart.checkout.step > 2) {\r\n            dispatch({ type: RESET_CART });\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // filter\r\n    const initialState = {\r\n        search: '',\r\n        sort: 'low',\r\n        gender: [],\r\n        categories: ['all'],\r\n        colors: [],\r\n        price: '',\r\n        rating: 0\r\n    };\r\n    const [filter, setFilter] = useState(initialState);\r\n\r\n    // search filter\r\n    const handleSearch = async (event) => {\r\n        const newString = event?.target.value;\r\n        setFilter({ ...filter, search: newString });\r\n    };\r\n\r\n    // sort options\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const openSort = Boolean(anchorEl);\r\n    const handleClickListItem = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const filterIsEqual = (a1, a2) =>\r\n        a1 === a2 ||\r\n        (a1.length === a2.length &&\r\n            a1.search === a2.search &&\r\n            a1.sort === a2.sort &&\r\n            a1.price === a2.price &&\r\n            a1.rating === a2.rating &&\r\n            JSON.stringify(a1.gender) === JSON.stringify(a2.gender) &&\r\n            JSON.stringify(a1.categories) === JSON.stringify(a2.categories) &&\r\n            JSON.stringify(a1.colors) === JSON.stringify(a2.colors));\r\n\r\n    const handelFilter = (type, params, rating) => {\r\n        setLoading(true);\r\n        switch (type) {\r\n            case 'gender':\r\n                if (filter.gender.some((item) => item === params)) {\r\n                    setFilter({ ...filter, gender: filter.gender.filter((item) => item !== params) });\r\n                } else {\r\n                    setFilter({ ...filter, gender: [...filter.gender, params] });\r\n                }\r\n                break;\r\n            case 'categories':\r\n                if (filter.categories.some((item) => item === params)) {\r\n                    setFilter({ ...filter, categories: filter.categories.filter((item) => item !== params) });\r\n                } else if (filter.categories.some((item) => item === 'all') || params === 'all') {\r\n                    setFilter({ ...filter, categories: [params] });\r\n                } else {\r\n                    setFilter({ ...filter, categories: [...filter.categories, params] });\r\n                }\r\n\r\n                break;\r\n            case 'colors':\r\n                if (filter.colors.some((item) => item === params)) {\r\n                    setFilter({ ...filter, colors: filter.colors.filter((item) => item !== params) });\r\n                } else {\r\n                    setFilter({ ...filter, colors: [...filter.colors, params] });\r\n                }\r\n                break;\r\n            case 'price':\r\n                setFilter({ ...filter, price: params });\r\n                break;\r\n            case 'search':\r\n                setFilter({ ...filter, search: params });\r\n                break;\r\n            case 'sort':\r\n                setFilter({ ...filter, sort: params });\r\n                break;\r\n            case 'rating':\r\n                setFilter({ ...filter, rating });\r\n                break;\r\n            case 'reset':\r\n                setFilter(initialState);\r\n                break;\r\n            default:\r\n            // no options\r\n        }\r\n    };\r\n\r\n    const filterData = async () => {\r\n        await axios\r\n            .post('/api/products/filter', {\r\n                filter\r\n            })\r\n            .then((res) => {\r\n                setProducts(res.data.results);\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        filterData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [filter]);\r\n\r\n    useEffect(() => {\r\n        setOpen(!matchDownLG);\r\n    }, [matchDownLG]);\r\n\r\n    // sort filter\r\n    const handleMenuItemClick = (event, index) => {\r\n        setFilter({ ...filter, sort: index });\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const sortLabel = SortOptions.filter((items) => items.value === filter.sort);\r\n\r\n    let productResult = <></>;\r\n    if (products) {\r\n        productResult = products.map((product, index) => (\r\n            <Grid key={index} item xs={12} sm={6} md={4} lg={3}>\r\n                <ProductCard\r\n                    id={product.id}\r\n                    image={product.image}\r\n                    name={product.name}\r\n                    description={product.description}\r\n                    offerPrice={product.offerPrice}\r\n                    salePrice={product.salePrice}\r\n                    rating={product.rating}\r\n                    color={product.colors ? product.colors[0] : undefined}\r\n                />\r\n            </Grid>\r\n        ));\r\n    }\r\n\r\n    const spacingMD = matchDownMD ? 1 : 1.5;\r\n\r\n    return (\r\n        <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n                <Grid container alignItems=\"center\" justifyContent=\"space-between\" spacing={matchDownMD ? 0.5 : 2}>\r\n                    <Grid item>\r\n                        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n                            <Typography variant=\"h4\">Shop</Typography>\r\n                            <IconButton size=\"large\">\r\n                                <ArrowForwardIosIcon sx={{ width: '0.875rem', height: '0.875rem', fontWeight: 500, color: 'grey.500' }} />\r\n                            </IconButton>\r\n                        </Stack>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" spacing={matchDownSM ? 0.5 : spacingMD}>\r\n                            <TextField\r\n                                sx={{ width: { xs: 140, md: 'auto' } }}\r\n                                InputProps={{\r\n                                    startAdornment: (\r\n                                        <InputAdornment position=\"start\">\r\n                                            <SearchIcon fontSize=\"small\" />\r\n                                        </InputAdornment>\r\n                                    )\r\n                                }}\r\n                                value={filter.search}\r\n                                placeholder=\"Search Product\"\r\n                                size=\"small\"\r\n                                onChange={handleSearch}\r\n                            />\r\n\r\n                            <Typography sx={{ pl: 1.5, fontSize: '1rem', color: 'grey.500', fontWeight: 400 }}>|</Typography>\r\n\r\n                            <ButtonBase disableRipple onClick={handleDrawerOpen}>\r\n                                <FilterAltIcon sx={{ fontWeight: 500, color: 'secondary.200' }} />\r\n                                <Typography variant=\"h5\" sx={{ mt: 0.5, display: { xs: 'none', sm: 'block' } }}>\r\n                                    Filter\r\n                                </Typography>\r\n                            </ButtonBase>\r\n\r\n                            <Typography sx={{ display: { xs: 'none', sm: 'flex' }, fontSize: '1rem', color: 'grey.500', fontWeight: 400 }}>\r\n                                |\r\n                            </Typography>\r\n                            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" sx={{ display: { xs: 'none', sm: 'flex' } }}>\r\n                                <Typography variant=\"h5\">Sort by: </Typography>\r\n                                <Button\r\n                                    id=\"demo-positioned-button\"\r\n                                    aria-controls=\"demo-positioned-menu\"\r\n                                    aria-haspopup=\"true\"\r\n                                    aria-expanded={openSort ? 'true' : undefined}\r\n                                    onClick={handleClickListItem}\r\n                                    sx={{ color: 'grey.500', fontWeight: 400 }}\r\n                                    endIcon={<KeyboardArrowDownIcon />}\r\n                                >\r\n                                    {sortLabel.length > 0 && sortLabel[0].label}\r\n                                </Button>\r\n                                <Menu\r\n                                    id=\"demo-positioned-menu\"\r\n                                    aria-labelledby=\"demo-positioned-button\"\r\n                                    anchorEl={anchorEl}\r\n                                    open={openSort}\r\n                                    onClose={handleClose}\r\n                                    anchorOrigin={{\r\n                                        vertical: 'bottom',\r\n                                        horizontal: 'right'\r\n                                    }}\r\n                                    transformOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right'\r\n                                    }}\r\n                                >\r\n                                    {SortOptions.map((option, index) => (\r\n                                        <MenuItem\r\n                                            sx={{ p: 1.5 }}\r\n                                            key={index}\r\n                                            selected={option.value === filter.sort}\r\n                                            onClick={(event) => handleMenuItemClick(event, option.value)}\r\n                                        >\r\n                                            {option.label}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </Menu>\r\n                            </Stack>\r\n                        </Stack>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Divider sx={{ borderColor: 'grey.400' }} />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n                <Box sx={{ display: 'flex' }}>\r\n                    <Main open={open}>\r\n                        <ProductFilterView\r\n                            filter={filter}\r\n                            filterIsEqual={filterIsEqual}\r\n                            handelFilter={handelFilter}\r\n                            initialState={initialState}\r\n                        />\r\n                        <Grid container spacing={gridSpacing}>\r\n                            {isLoading\r\n                                ? [1, 2, 3, 4, 5, 6, 7, 8].map((item) => (\r\n                                      <Grid key={item} item xs={12} sm={6} md={4} lg={3}>\r\n                                          <SkeletonProductPlaceholder />\r\n                                      </Grid>\r\n                                  ))\r\n                                : productResult}\r\n                            {products.length <= 0 && (\r\n                                <Grid item xs={12} sx={{ mt: 3 }}>\r\n                                    <ProductEmpty />\r\n                                </Grid>\r\n                            )}\r\n                        </Grid>\r\n                    </Main>\r\n                    <Drawer\r\n                        sx={{\r\n                            ml: open ? 3 : 0,\r\n                            height: matchDownLG ? '100vh' : 'auto',\r\n                            flexShrink: 0,\r\n                            zIndex: { xs: 1200, lg: open ? 0 : -1 },\r\n                            overflowX: 'hidden',\r\n                            width: appDrawerWidth,\r\n                            '& .MuiDrawer-paper': {\r\n                                height: 'auto',\r\n                                width: appDrawerWidth,\r\n                                position: matchDownLG ? 'fixed' : 'relative',\r\n                                border: 'none',\r\n                                borderRadius: matchDownLG ? 0 : `${customization.borderRadius}px`\r\n                            }\r\n                        }}\r\n                        variant={matchDownLG ? 'temporary' : 'persistent'}\r\n                        anchor=\"right\"\r\n                        open={open}\r\n                        ModalProps={{ keepMounted: true }}\r\n                        onClose={handleDrawerOpen}\r\n                    >\r\n                        <PerfectScrollbar component=\"div\">\r\n                            <ProductFilter filter={filter} handelFilter={handelFilter} />\r\n                        </PerfectScrollbar>\r\n                    </Drawer>\r\n                </Box>\r\n            </Grid>\r\n            <FloatingCart />\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}