{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Documents/gsa_16/newgsa/src/views/application/contact/Card/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, Fragment } from 'react'; // material-ui\n\nimport { useTheme } from '@mui/material/styles';\nimport { Button, Divider, Grid, InputAdornment, OutlinedInput, Typography } from '@mui/material'; // project imports\n\nimport UserDetails from '../UserDetails';\nimport UserEdit from '../UserEdit';\nimport ContactCard from 'ui-component/cards/ContactCard';\nimport MainCard from 'ui-component/cards/MainCard';\nimport axios from 'utils/axios';\nimport { gridSpacing } from 'store/constant';\nimport User1 from 'assets/images/users/avatar-1.png'; // assets\n\nimport { IconSearch } from '@tabler/icons';\nimport AddCircleOutlineOutlinedIcon from '@mui/icons-material/AddCircleOutlineOutlined'; // ==============================|| CONTACT CARD ||============================== //\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ContactCardPage = () => {\n  _s();\n\n  const theme = useTheme(); // get all users details\n\n  const [data, setData] = useState({});\n\n  const convertData = userData => userData.reduce((a, curr) => {\n    const firstLatter = curr.name[0].toUpperCase();\n\n    if (Object.prototype.hasOwnProperty.call(a, firstLatter)) {\n      a[firstLatter].push(curr);\n    } else {\n      a[firstLatter] = [curr];\n    }\n\n    return a;\n  }, {});\n\n  const getData = async () => {\n    const response = await axios.get('/api/chat/users');\n    setData(convertData(response.data.users));\n    return response.data.users;\n  };\n\n  useEffect(() => {\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // edit selected user and modify users data\n\n  const [user, setUser] = useState({});\n\n  const modifyUser = async u => {\n    await axios.post('/api/chat/users/modify', u);\n    getData().then(d => {\n      if (user) {\n        const idx = d.findIndex(item => item.id === user.id);\n        if (idx > -1) setUser(d[idx]);\n      }\n    });\n  }; // handle new user insert action\n\n\n  const [userDetails, setUserDetails] = useState(false);\n  const [userEdit, setUserEdit] = useState(false);\n\n  const handleOnAdd = () => {\n    setUser({\n      name: '',\n      company: '',\n      role: '',\n      work_email: '',\n      personal_email: '',\n      work_phone: '',\n      personal_phone: '',\n      location: 'USA',\n      image: User1,\n      status: 'I am online',\n      lastMessage: '2h ago',\n      birthdayText: ''\n    });\n    setUserDetails(false);\n    setUserEdit(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(MainCard, {\n    title: \"Contact Cards\",\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: gridSpacing,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        className: \"block\",\n        item: true,\n        xs: true,\n        zeroMinWidth: true,\n        sx: {\n          display: userDetails || userEdit ? {\n            xs: 'none',\n            md: 'flex'\n          } : 'flex'\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          alignItems: \"center\",\n          spacing: gridSpacing,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: true,\n            zeroMinWidth: true,\n            children: /*#__PURE__*/_jsxDEV(OutlinedInput, {\n              id: \"input-search-card-style1\",\n              placeholder: \"Search Contact\",\n              fullWidth: true,\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(IconSearch, {\n                  stroke: 1.5,\n                  size: \"1rem\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              size: \"large\",\n              startIcon: /*#__PURE__*/_jsxDEV(AddCircleOutlineOutlinedIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 81\n              }, this),\n              onClick: handleOnAdd,\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), Object.keys(data).map((key, index) => /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  borderColor: theme.palette.primary.light,\n                  mt: 0.625,\n                  mb: 1.875\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                color: \"primary\",\n                sx: {\n                  fontSize: '1rem'\n                },\n                children: key.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  borderColor: theme.palette.primary.light,\n                  mt: 1.875,\n                  mb: 0.625\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                direction: \"row\",\n                spacing: gridSpacing,\n                children: data[key].map((userRow, i) => /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  md: 6,\n                  lg: 4,\n                  xl: 3,\n                  children: /*#__PURE__*/_jsxDEV(ContactCard, {\n                    avatar: userRow.avatar,\n                    name: userRow.name,\n                    role: userRow.role,\n                    email: userRow.work_email,\n                    contact: userRow.phone,\n                    location: userRow.location,\n                    onActive: () => {\n                      setUser(userRow);\n                      setUserDetails(true);\n                      setUserEdit(false);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 49\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 33\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), userDetails && /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          width: 342,\n          margin: {\n            xs: '0 auto',\n            md: 'initial'\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(UserDetails, {\n          user: user,\n          onEditClick: () => {\n            setUserDetails(false);\n            setUserEdit(true);\n          },\n          onClose: () => {\n            setUserDetails(false);\n            setUserEdit(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this), userEdit && /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          width: 342,\n          margin: {\n            xs: '0 auto',\n            md: 'initial'\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(UserEdit, {\n          user: user,\n          onSave: u => {\n            if (u.id) setUserDetails(true);\n            setUserEdit(false);\n            modifyUser(u);\n          },\n          onCancel: u => {\n            if (u.id) setUserDetails(true);\n            setUserEdit(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ContactCardPage, \"hULIw8kPwdnLHLa9JVTfcb90zN8=\", false, function () {\n  return [useTheme];\n});\n\n_c = ContactCardPage;\nexport default ContactCardPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContactCardPage\");","map":{"version":3,"sources":["/Users/admin/Documents/gsa_16/newgsa/src/views/application/contact/Card/index.js"],"names":["useState","useEffect","Fragment","useTheme","Button","Divider","Grid","InputAdornment","OutlinedInput","Typography","UserDetails","UserEdit","ContactCard","MainCard","axios","gridSpacing","User1","IconSearch","AddCircleOutlineOutlinedIcon","ContactCardPage","theme","data","setData","convertData","userData","reduce","a","curr","firstLatter","name","toUpperCase","Object","prototype","hasOwnProperty","call","push","getData","response","get","users","user","setUser","modifyUser","u","post","then","d","idx","findIndex","item","id","userDetails","setUserDetails","userEdit","setUserEdit","handleOnAdd","company","role","work_email","personal_email","work_phone","personal_phone","location","image","status","lastMessage","birthdayText","display","xs","md","keys","map","key","index","borderColor","palette","primary","light","mt","mb","fontSize","userRow","i","avatar","phone","width","margin"],"mappings":"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","sourcesContent":["import { useState, useEffect, Fragment } from 'react';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { Button, Divider, Grid, InputAdornment, OutlinedInput, Typography } from '@mui/material';\r\n\r\n// project imports\r\nimport UserDetails from '../UserDetails';\r\nimport UserEdit from '../UserEdit';\r\nimport ContactCard from 'ui-component/cards/ContactCard';\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport axios from 'utils/axios';\r\nimport { gridSpacing } from 'store/constant';\r\nimport User1 from 'assets/images/users/avatar-1.png';\r\n\r\n// assets\r\nimport { IconSearch } from '@tabler/icons';\r\nimport AddCircleOutlineOutlinedIcon from '@mui/icons-material/AddCircleOutlineOutlined';\r\n\r\n// ==============================|| CONTACT CARD ||============================== //\r\n\r\nconst ContactCardPage = () => {\r\n    const theme = useTheme();\r\n\r\n    // get all users details\r\n    const [data, setData] = useState({});\r\n    const convertData = (userData) =>\r\n        userData.reduce((a, curr) => {\r\n            const firstLatter = curr.name[0].toUpperCase();\r\n            if (Object.prototype.hasOwnProperty.call(a, firstLatter)) {\r\n                a[firstLatter].push(curr);\r\n            } else {\r\n                a[firstLatter] = [curr];\r\n            }\r\n            return a;\r\n        }, {});\r\n\r\n    const getData = async () => {\r\n        const response = await axios.get('/api/chat/users');\r\n        setData(convertData(response.data.users));\r\n        return response.data.users;\r\n    };\r\n\r\n    useEffect(() => {\r\n        getData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // edit selected user and modify users data\r\n    const [user, setUser] = useState({});\r\n    const modifyUser = async (u) => {\r\n        await axios.post('/api/chat/users/modify', u);\r\n        getData().then((d) => {\r\n            if (user) {\r\n                const idx = d.findIndex((item) => item.id === user.id);\r\n                if (idx > -1) setUser(d[idx]);\r\n            }\r\n        });\r\n    };\r\n\r\n    // handle new user insert action\r\n    const [userDetails, setUserDetails] = useState(false);\r\n    const [userEdit, setUserEdit] = useState(false);\r\n    const handleOnAdd = () => {\r\n        setUser({\r\n            name: '',\r\n            company: '',\r\n            role: '',\r\n            work_email: '',\r\n            personal_email: '',\r\n            work_phone: '',\r\n            personal_phone: '',\r\n            location: 'USA',\r\n            image: User1,\r\n            status: 'I am online',\r\n            lastMessage: '2h ago',\r\n            birthdayText: ''\r\n        });\r\n        setUserDetails(false);\r\n        setUserEdit(true);\r\n    };\r\n\r\n    return (\r\n        <MainCard title=\"Contact Cards\">\r\n            <Grid container spacing={gridSpacing}>\r\n                <Grid\r\n                    className=\"block\"\r\n                    item\r\n                    xs\r\n                    zeroMinWidth\r\n                    sx={{ display: userDetails || userEdit ? { xs: 'none', md: 'flex' } : 'flex' }}\r\n                >\r\n                    <Grid container alignItems=\"center\" spacing={gridSpacing}>\r\n                        <Grid item xs zeroMinWidth>\r\n                            <OutlinedInput\r\n                                id=\"input-search-card-style1\"\r\n                                placeholder=\"Search Contact\"\r\n                                fullWidth\r\n                                startAdornment={\r\n                                    <InputAdornment position=\"start\">\r\n                                        <IconSearch stroke={1.5} size=\"1rem\" />\r\n                                    </InputAdornment>\r\n                                }\r\n                            />\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Button variant=\"contained\" size=\"large\" startIcon={<AddCircleOutlineOutlinedIcon />} onClick={handleOnAdd}>\r\n                                Add\r\n                            </Button>\r\n                        </Grid>\r\n\r\n                        {Object.keys(data).map((key, index) => (\r\n                            <Fragment key={index}>\r\n                                <Grid item xs={12}>\r\n                                    <Divider sx={{ borderColor: theme.palette.primary.light, mt: 0.625, mb: 1.875 }} />\r\n                                    <Typography variant=\"h4\" color=\"primary\" sx={{ fontSize: '1rem' }}>\r\n                                        {key.toUpperCase()}\r\n                                    </Typography>\r\n                                    <Divider sx={{ borderColor: theme.palette.primary.light, mt: 1.875, mb: 0.625 }} />\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <Grid container direction=\"row\" spacing={gridSpacing}>\r\n                                        {data[key].map((userRow, i) => (\r\n                                            <Grid item xs={12} md={6} lg={4} xl={3} key={i}>\r\n                                                <ContactCard\r\n                                                    avatar={userRow.avatar}\r\n                                                    name={userRow.name}\r\n                                                    role={userRow.role}\r\n                                                    email={userRow.work_email}\r\n                                                    contact={userRow.phone}\r\n                                                    location={userRow.location}\r\n                                                    onActive={() => {\r\n                                                        setUser(userRow);\r\n                                                        setUserDetails(true);\r\n                                                        setUserEdit(false);\r\n                                                    }}\r\n                                                />\r\n                                            </Grid>\r\n                                        ))}\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Fragment>\r\n                        ))}\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                {userDetails && (\r\n                    <Grid item sx={{ width: 342, margin: { xs: '0 auto', md: 'initial' } }}>\r\n                        <UserDetails\r\n                            user={user}\r\n                            onEditClick={() => {\r\n                                setUserDetails(false);\r\n                                setUserEdit(true);\r\n                            }}\r\n                            onClose={() => {\r\n                                setUserDetails(false);\r\n                                setUserEdit(false);\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n                )}\r\n\r\n                {userEdit && (\r\n                    <Grid item sx={{ width: 342, margin: { xs: '0 auto', md: 'initial' } }}>\r\n                        <UserEdit\r\n                            user={user}\r\n                            onSave={(u) => {\r\n                                if (u.id) setUserDetails(true);\r\n                                setUserEdit(false);\r\n                                modifyUser(u);\r\n                            }}\r\n                            onCancel={(u) => {\r\n                                if (u.id) setUserDetails(true);\r\n                                setUserEdit(false);\r\n                            }}\r\n                        />\r\n                    </Grid>\r\n                )}\r\n            </Grid>\r\n        </MainCard>\r\n    );\r\n};\r\n\r\nexport default ContactCardPage;\r\n"]},"metadata":{},"sourceType":"module"}